
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="02_methodology.html">
      
      
        <link rel="next" href="04_io.html">
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.1.1">
    
    
      
        <title>User Guide - TMfS18 Trip End Model</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.402914a4.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.a0c5b2b5.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="stylesheets/palette.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#user-guide" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="index.html" title="TMfS18 Trip End Model" class="md-header__button md-logo" aria-label="TMfS18 Trip End Model" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 9H7V7h10m0 6H7v-2h10m-3 6H7v-2h7M12 3a1 1 0 0 1 1 1 1 1 0 0 1-1 1 1 1 0 0 1-1-1 1 1 0 0 1 1-1m7 0h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            TMfS18 Trip End Model
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              User Guide
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="TMfS18 Trip End Model" class="md-nav__button md-logo" aria-label="TMfS18 Trip End Model" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 9H7V7h10m0 6H7v-2h10m-3 6H7v-2h7M12 3a1 1 0 0 1 1 1 1 1 0 0 1-1 1 1 1 0 0 1-1-1 1 1 0 0 1 1-1m7 0h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2Z"/></svg>

    </a>
    TMfS18 Trip End Model
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="01_introduction.html" class="md-nav__link">
        Introduction
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="02_methodology.html" class="md-nav__link">
        Methodology
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          User Guide
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="03_user_guide.html" class="md-nav__link md-nav__link--active">
        User Guide
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#input-data-and-directory-structure" class="md-nav__link">
    Input Data and Directory Structure
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setting-up-the-model-run" class="md-nav__link">
    Setting up the Model Run
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#trip-end-outputs" class="md-nav__link">
    Trip End Outputs
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#output-trip-end-files" class="md-nav__link">
    Output Trip End Files
  </a>
  
    <nav class="md-nav" aria-label="Output Trip End Files">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-tod-file" class="md-nav__link">
    Example TOD File
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-cte-file" class="md-nav__link">
    Example CTE File
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pivoting-files" class="md-nav__link">
    Pivoting Files
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#goods-vehicle-files" class="md-nav__link">
    Goods Vehicle Files
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#new-base-year-planning-data" class="md-nav__link">
    New Base Year Planning Data
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-ins-and-smoothing" class="md-nav__link">
    Add-Ins and Smoothing
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="04_io.html" class="md-nav__link">
        Input and Output Files
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="05_programming_overview.html" class="md-nav__link">
        Programming Overview
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#input-data-and-directory-structure" class="md-nav__link">
    Input Data and Directory Structure
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setting-up-the-model-run" class="md-nav__link">
    Setting up the Model Run
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#trip-end-outputs" class="md-nav__link">
    Trip End Outputs
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#output-trip-end-files" class="md-nav__link">
    Output Trip End Files
  </a>
  
    <nav class="md-nav" aria-label="Output Trip End Files">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-tod-file" class="md-nav__link">
    Example TOD File
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-cte-file" class="md-nav__link">
    Example CTE File
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pivoting-files" class="md-nav__link">
    Pivoting Files
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#goods-vehicle-files" class="md-nav__link">
    Goods Vehicle Files
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#new-base-year-planning-data" class="md-nav__link">
    New Base Year Planning Data
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-ins-and-smoothing" class="md-nav__link">
    Add-Ins and Smoothing
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="user-guide">User Guide<a class="headerlink" href="#user-guide" title="Permanent link">&para;</a></h1>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>The following sections describe how to operate the Trip End Model and
the relevant model directory structures.</p>
<h2 id="input-data-and-directory-structure">Input Data and Directory Structure<a class="headerlink" href="#input-data-and-directory-structure" title="Permanent link">&para;</a></h2>
<p>The Trip End Model files are located within various folders under a main
TMfS model directory - referred to as <code>tmfs_root</code>. The PC will also
need to have the relevant Cube software files installed. These are
consistent with the files used to run the TMfS model.</p>
<p>As the Trip End Model is an incremental model, it needs to pivot from
the existing run of the base year model and/or a previous forecast year
scenario. As a result, the base year files must exist on the PC running
the Trip End Model before a new forecast year run can be undertaken.
Therefore, the calibrated base year trip ends should be located in the
directory:</p>
<div class="highlight"><pre><span></span><code>{tmfs_root}\Runs\{base_year}\Demand
</code></pre></div>
<p>where <code>base_year</code> for 2018 would be "18".</p>
<p>The Trip End Model uses various planning data and goods vehicle data
output from the TELMoS model. For each modelled year, three files are
required, including:</p>
<ul>
<li><code>tav_{tel_year}{tel_scenario}.csv</code> - the household and employment
  data file;</li>
<li><code>tmfs{tel_year}{tel_scenario}[_hw].csv</code> - the population data
  file. The <code>_hw</code> suffix is added if the file is split by WAH/WBC; and</li>
<li><code>trfl{tel_year}{tel_scenario}.dat</code> - the goods vehicle data file.
  Where <code>tel_year</code> is the forecast year and <code>tel_scenario</code> is the
  TELMoS test scenario code, e.g. "AE" and "18" respectively.</li>
</ul>
<p>For each new forecast year modelled scenario, a new folder should be
created in <code>delta_root</code>, named using the relevant TELMoS scenario code
(<code>tel_scenario</code>). The three files should be saved in the folder 
<code>{delta_root}\{tel_scenario}</code>.</p>
<p>The remaining input data is contained within the "Factors" directory.
The files in this folder contain the trip rates and attraction factors
described previously. A full list of all input files is described below.</p>
<h2 id="setting-up-the-model-run">Setting up the Model Run<a class="headerlink" href="#setting-up-the-model-run" title="Permanent link">&para;</a></h2>
<p>If no previous model run of the Trip End Model has been undertaken for a
forecast year, a new folder should be created in
<code>{tmfs_root}\Runs\{tel_year}\{tel_scenario}</code>. Within this folder, a
further folder named "Demand" should also be created.</p>
<p>Now the directory structure is complete the model executable can be run.
This can be undertaken either using the executable GUI or through the
command line - via a batch file or other method. The executable takes
eight arguments, as follows:</p>
<ul>
<li>Delta Root - path for the DELTA files;</li>
<li>TMfS Root - path for the executable;</li>
<li>Forecast Year - 2-digit year;</li>
<li>Forecast TMfS Scenario - what the user is calling the demand
  scenario which is produced by this run of the Trip End Model;</li>
<li>Forecast Year TELMoS scenario code;</li>
<li>Base Year - the year used to pivot from</li>
<li>Base TMfS Scenario Code - the demand model input set that is being
  pivoted from; and</li>
<li>Base Year TELMoS Scenario Code - the planning data used to create
  the base scenario</li>
</ul>
<p>Once the arguments have been entered, the model can be run. A model
run should typically take less than 5 minutes to complete for one
scenario.</p>
<h2 id="trip-end-outputs">Trip End Outputs<a class="headerlink" href="#trip-end-outputs" title="Permanent link">&para;</a></h2>
<p>A successful Trip End Model run will create the following output files:</p>
<ul>
<li><code>*.TOD</code> / <code>*.CTE</code> files - nine of each, these are the trip end files for
  input to the demand model;</li>
<li><code>tav_{tel_year}_{tel_scenario}.csv</code>,
  <code>tmfs{tel_year}_{tel_scenario}.csv</code>, <code>lgv{tel_year}{tel_scenario}.dat</code> and
  <code>hgv{tel_year}{tel_scenario}.dat</code> - these are the files which are used for 
  future pivoting; and</li>
<li><code>*.DAT</code> and <code>*TE.DAT</code> - 36 files, these are files for each goods
  vehicle and add-in category for each time period.</li>
</ul>
<p>The folder structure containing the various output files is shown below. 
The content of these folders are used to create trip ends for
each subsequent year. The base year can also be used to provide the
pivoting year to create subsequent forecast year data.</p>
<p><img alt="" src="media/trip_end_output_structure.png" /></p>
<h2 id="output-trip-end-files">Output Trip End Files<a class="headerlink" href="#output-trip-end-files" title="Permanent link">&para;</a></h2>
<h3 id="example-tod-file">Example TOD File<a class="headerlink" href="#example-tod-file" title="Permanent link">&para;</a></h3>
<p>The <code>*.TOD</code> file contains six columns, including:</p>
<ul>
<li>Modelled zone;</li>
<li>C11 Productions (1 Car 1 Adult Household);</li>
<li>C12 Productions (1 Car 2+ Adult Household);</li>
<li>C2 Productions (2+ Car Households);</li>
<li>C0 Productions (0 Car Households); and</li>
<li>all trip attractions (in person-trips).</li>
</ul>
<p><img alt="" src="media/example_tod_file.png" /></p>
<h3 id="example-cte-file">Example CTE File<a class="headerlink" href="#example-cte-file" title="Permanent link">&para;</a></h3>
<p>The <code>*.CTE</code> file contains similar information with the exception that
columns are disaggregated by car and public transport. The columns for
the CTE file include:</p>
<ul>
<li>Modelled zone;</li>
<li>Car - C11C Productions (1 Car 1 Adult Household);</li>
<li>Car - C12C Productions (1 Car 2+ Adult Household);</li>
<li>Car - C2C Productions (2+ Car Households);</li>
<li>PT - C11P Productions (1 Car 1 Adult Household);</li>
<li>PT - C12P Productions (1 Car 2+ Adult Household);</li>
<li>PT - C2P Productions (2+ Car Households);</li>
<li>PT - C0 Productions (0 Car Households); and</li>
<li>all trip attractions (in person-trips).</li>
</ul>
<p><img alt="" src="media/example_cte_file.png" /></p>
<p>Note: In the <code>*.CTE</code> file the split between car and PT is taken from the
pivot year. The CTE splits are used to start the demand model and the
mode choice model then applies.</p>
<h3 id="pivoting-files">Pivoting Files<a class="headerlink" href="#pivoting-files" title="Permanent link">&para;</a></h3>
<p>Examples of the <code>tav_XX_SS.csv</code> and <code>tmfsXX_SS.csv</code> files are shown in
figures below. These are used in future year pivoting.</p>
<p>The TAV file contains the relevant planning data file multiplied by the trip
attraction rates and then combined into Work (HW), Employers Business
(HE), Other (HO) and Education (HS) purposes. This data is then used in
conjunction with a similar file from a forecast year to produce
attraction growth factors. In this case the factors are the same for all
time periods, modes and household types.</p>
<p><img alt="" src="media/example_tav_file.png" /></p>
<p>Similarly, the <code>tmfsXX_SS.csv</code> file contains the relevant planning data
multiplied by the trip rates described in section "Trip Rate
Calculation". It is used in conjunction with a file for a future year
scenario to produce production growth factors. Different values are
produced by time period, mode and household type. These are designated
in the column headers by A, I and P for the time periods; C11, C12, C2
and C0 for the household types; C and P for car and PT and W, E, O and S
(Work, Employers Business, Other and Education) for the purposes.</p>
<p><img alt="" src="media/example_tmfs_file.png" /></p>
<h3 id="goods-vehicle-files">Goods Vehicle Files<a class="headerlink" href="#goods-vehicle-files" title="Permanent link">&para;</a></h3>
<p>For goods vehicles, <code>*.DAT</code>:</p>
<p><img alt="" src="media/example_gv_dat_file.png" /></p>
<p>and <code>*TE.DAT</code> files:</p>
<p><img alt="" src="media/example_gv_dat_file.png" /></p>
<p>are produced for input to the smoothing process.</p>
<p>The <code>hgv{tel_year}{tel_scenario}.dat</code> (and 
<code>lgv{tel_year}{tel_scenario}.dat</code>) files are also generated:</p>
<p><img alt="" src="media/example_gv_output.png" /></p>
<p>These are the TELMoS-based goods vehicle matrices. These are used with
their equivalent file from a forecast year scenario to produce goods
vehicle growth factors.</p>
<h2 id="new-base-year-planning-data">New Base Year Planning Data<a class="headerlink" href="#new-base-year-planning-data" title="Permanent link">&para;</a></h2>
<p>If new base year (2018) land use planning data is produced, this should
be run through the Trip End Model to create new
<code>tav_{tel_year}_{tel_scenario}.csv</code>,
<code>tmfs{tel_year}_{tel_scenario}.csv</code>, <code>lgv{tel_year}{tel_scenario}.dat</code>
and <code>hgv{tel_year}{tel_scenario}.dat</code> files. These new data would then
be applied to calculate new forecast year growth factors. This process
requires the following steps:</p>
<ul>
<li>Create a dummy base year folder (e.g. 14);</li>
<li>Copy the contents of the current "18" folder into this dummy folder;</li>
<li>Run the Trip End Model with "14" as the base year and "18" as the
  forecast year, linking to the new "18" planning data into the "18"
  folder; and</li>
<li>It is likely that the new base year trip ends will not be completely
  identical to the calibrated and validated base year trip ends, so
  finally the user needs to copy the original base year <code>*.TOD</code> and
  <code>*.CTE</code> files into the new Base year scenario folder.</li>
</ul>
<p>In other words, the only new files which are required are the
<code>tmfs18_AXX.csv</code> and <code>tav_18_AXX.csv</code> files.</p>
<h2 id="add-ins-and-smoothing">Add-Ins and Smoothing<a class="headerlink" href="#add-ins-and-smoothing" title="Permanent link">&para;</a></h2>
<p>The "Add-in" process represents the calculation of travel movements that
are not contained in the core TMfS demand model. This includes a
"smoothing" stage which represents a gravity model process. These stages
are associated with forecasting goods vehicles, external trips and
education matrices.</p>
<p>To undertake this process, a model user should open the <code>Smoothing.cat</code>
CUBE file located at, <code>{tmfs_root}\Smoothing</code>. On opening the file, a
CUBE Catalog will be opened, as shown below:</p>
<p><img alt="" src="media/smoothing_catalog.png" /></p>
<p>In the Scenarios section of the catalogue, right click on <code>Base</code>, select
<code>Add Child</code> and name using the forecast scenario ID and forecast year
(e.g. "AJA_31"). In the pop-up box enter the required details e.g. Base
Year, Base Scenario, Forecast Year, Forecast Scenario. If the base year
is 2007 enter "07". In the "FileBaseYear" box enter the base year. If
this is 2007 enter 7 (rather than 07). Once all details have been
entered select "Run".</p>
<p>The smoothing process then automatically links to the files in the
"demand" folder produced by the previous part of the Trip End Model and
runs to produce the "add-in" files - goods vehicle, external trips and
education matrices. This process in operation is shown below. It
takes around 20 minutes to complete one forecast year.</p>
<p><img alt="" src="media/smoothing_progress_view.png" /></p>
<p>The Smoothing process produces three education matrices in the
<code>demand\{tel_scenario}</code> folder (one for each time period), and six
add-in matrices; HGV, LGV, COM (Home Based Work), EMP (Home Based
Employers Business), OTH (Home Based Other) and PT in the same folder.</p>
<p>Once all files have been produced (<code>*.TOD</code>, <code>*.CTE</code>, Education matrices
and Add-in matrices) these are then the input demand files.</p>
<p>These demand scenario files should be transferred manually into the
relevant folder for undertaking demand model runs. This should be
<code>{tmfs_root}\Runs\{tel_year}\Demand\{tel_scenario}</code>.</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": ".", "features": [], "search": "assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.b78d2936.min.js"></script>
      
        <script src="javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>